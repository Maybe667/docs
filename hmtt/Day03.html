<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Day03_反馈操作和频道管理 | UIIO的笔记小站</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="UIIO的笔记小站">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.3cb233de.css" as="style"><link rel="preload" href="/assets/js/app.e0cc1cb1.js" as="script"><link rel="preload" href="/assets/js/3.9eb4373a.js" as="script"><link rel="preload" href="/assets/js/1.592f9f83.js" as="script"><link rel="preload" href="/assets/js/12.b6cdf8f6.js" as="script"><link rel="prefetch" href="/assets/js/10.df4741fb.js"><link rel="prefetch" href="/assets/js/11.741d00e8.js"><link rel="prefetch" href="/assets/js/13.c374d746.js"><link rel="prefetch" href="/assets/js/14.aaf533bd.js"><link rel="prefetch" href="/assets/js/15.fd252bbc.js"><link rel="prefetch" href="/assets/js/16.5a087e93.js"><link rel="prefetch" href="/assets/js/17.4edb9cc6.js"><link rel="prefetch" href="/assets/js/18.25d7b9eb.js"><link rel="prefetch" href="/assets/js/19.8e818515.js"><link rel="prefetch" href="/assets/js/4.fae9d412.js"><link rel="prefetch" href="/assets/js/5.edf2f673.js"><link rel="prefetch" href="/assets/js/6.08d7d481.js"><link rel="prefetch" href="/assets/js/7.80895dd6.js"><link rel="prefetch" href="/assets/js/8.94ae76c4.js"><link rel="prefetch" href="/assets/js/9.30f14a82.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3cb233de.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>UIIO的笔记小站</h3> <p class="description" data-v-59e6cb88>UIIO的笔记小站</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2022
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.jpg" alt="UIIO的笔记小站" class="logo"> <span class="site-name">UIIO的笔记小站</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      黑马头条(暂)
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hmtt/day00.html" class="nav-link"><i class="undefined"></i>
  Day00_开始
</a></li><li class="dropdown-item"><!----> <a href="/hmtt/day01.html" class="nav-link"><i class="undefined"></i>
  Day01_项目开始_登录
</a></li><li class="dropdown-item"><!----> <a href="/hmtt/day02.html" class="nav-link"><i class="undefined"></i>
  Day02_首页
</a></li><li class="dropdown-item"><!----> <a href="/hmtt/day03.html" class="nav-link"><i class="undefined"></i>
  Day03_反馈操作和频道管理
</a></li><li class="dropdown-item"><!----> <a href="/hmtt/day04.html" class="nav-link"><i class="undefined"></i>
  Day04_文章搜索和详情
</a></li><li class="dropdown-item"><!----> <a href="/hmtt/day05.html" class="nav-link"><i class="undefined"></i>
  Day05_文章评论-个人中心
</a></li><li class="dropdown-item"><!----> <a href="/hmtt/day06.html" class="nav-link"><i class="undefined"></i>
  Day06_小思同学
</a></li><li class="dropdown-item"><!----> <a href="/hmtt/day07.html" class="nav-link"><i class="undefined"></i>
  Day07_优化细节
</a></li><li class="dropdown-item"><!----> <a href="/hmtt/day08.html" class="nav-link"><i class="undefined"></i>
  Day08_知识扩展-打包部署
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Maybe667/docs" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>9</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>0</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      黑马头条(暂)
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/hmtt/day00.html" class="nav-link"><i class="undefined"></i>
  Day00_开始
</a></li><li class="dropdown-item"><!----> <a href="/hmtt/day01.html" class="nav-link"><i class="undefined"></i>
  Day01_项目开始_登录
</a></li><li class="dropdown-item"><!----> <a href="/hmtt/day02.html" class="nav-link"><i class="undefined"></i>
  Day02_首页
</a></li><li class="dropdown-item"><!----> <a href="/hmtt/day03.html" class="nav-link"><i class="undefined"></i>
  Day03_反馈操作和频道管理
</a></li><li class="dropdown-item"><!----> <a href="/hmtt/day04.html" class="nav-link"><i class="undefined"></i>
  Day04_文章搜索和详情
</a></li><li class="dropdown-item"><!----> <a href="/hmtt/day05.html" class="nav-link"><i class="undefined"></i>
  Day05_文章评论-个人中心
</a></li><li class="dropdown-item"><!----> <a href="/hmtt/day06.html" class="nav-link"><i class="undefined"></i>
  Day06_小思同学
</a></li><li class="dropdown-item"><!----> <a href="/hmtt/day07.html" class="nav-link"><i class="undefined"></i>
  Day07_优化细节
</a></li><li class="dropdown-item"><!----> <a href="/hmtt/day08.html" class="nav-link"><i class="undefined"></i>
  Day08_知识扩展-打包部署
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Maybe667/docs" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Day03_反馈操作和频道管理</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2022
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Day03_反馈操作和频道管理</h1> <div data-v-8a445198><!----> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>11/17/2022</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="今日学习目标"><a href="#今日学习目标" class="header-anchor">#</a> 今日学习目标</h2> <ul><li>完成反馈面板铺设和使用</li> <li>学习axios请求和响应拦截器</li> <li>完成频道管理</li></ul> <h2 id="_1-反馈-一级面板铺设"><a href="#_1-反馈-一级面板铺设" class="header-anchor">#</a> 1.反馈_一级面板铺设</h2> <h3 id="目标"><a href="#目标" class="header-anchor">#</a> 目标</h3> <ul><li><p>点击x按钮-出现一级反馈面板</p> <p><img src="images/%E4%B8%80%E7%BA%A7%E9%9D%A2%E6%9D%BF.gif" alt="一级面板"></p></li></ul> <h3 id="分析"><a href="#分析" class="header-anchor">#</a> 分析</h3> <ol><li><p>找到类似组件 - vant中的 ActionSheet 动作面板</p></li> <li><p>main.js中注册</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ActionSheet <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vant'</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ActionSheet<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>在ArticleItem.vue中使用</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 一条文章单元格并列 --&gt;</span>
    <span class="token comment">&lt;!-- 反馈面板 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-sheet</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:actions</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>actions<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onSelect<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
        <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'不感兴趣'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'反馈垃圾内容'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'拉黑作者'</span> <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// 反馈面板点击事件</span>
            <span class="token function">onSelect</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>发现出来的不全, 分析DOM层级结构, 调整挂载位置, 给van-action-sheet设置</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-sheet</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:actions</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>actions<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onSelect<span class="token punctuation">&quot;</span></span> <span class="token attr-name">get-container</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>body<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p>补充取消按钮 文字</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-sheet</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:actions</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>actions<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onSelect<span class="token punctuation">&quot;</span></span> <span class="token attr-name">get-container</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>body<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cancel-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>取消<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p>点击x反馈按钮, 显示反馈面板</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cross<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onCloseClick<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 点击了叉号按钮</span>
        <span class="token function">onCloseClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 展示动作面板</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <h3 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h3> <ol><li>明确目标, 找到组件, 微调整使用</li></ol> <h2 id="_2-反馈-二级面板铺设"><a href="#_2-反馈-二级面板铺设" class="header-anchor">#</a> 2.反馈_二级面板铺设</h2> <h3 id="目标-2"><a href="#目标-2" class="header-anchor">#</a> 目标</h3> <ul><li><p>一级面板&lt;反馈其他问题&gt;点击</p></li> <li><p>切换数据源显示二级面板内容</p> <p><img src="images/%E4%BA%8C%E7%BA%A7%E9%9D%A2%E6%9D%BF.gif" alt="二级面板"></p></li></ul> <h3 id="步骤"><a href="#步骤" class="header-anchor">#</a> 步骤</h3> <ol><li><p>只要切换actions数组的值即可</p></li> <li><p>不想散落在逻辑页面里, 所以在api/report.js定义2个变量</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> firstActions <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'不感兴趣'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'反馈垃圾内容'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> secondActions <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'其它问题'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'标题夸张'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'低俗色情'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'错别字多'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'旧闻重复'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'内容不实'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'侵权'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'广告软文'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'涉嫌违法犯罪'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

</code></pre></div></li> <li><p>在ArticleItem.vue中引入使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> firstActions<span class="token punctuation">,</span> secondActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/reports'</span>

<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...省略其他</span>
        <span class="token literal-property property">actions</span><span class="token operator">:</span> firstActions
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>点击反馈面板切换数据</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">onSelect</span> <span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// action绑定的数据对象, index是索引</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'反馈垃圾内容'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 证明点击的是反馈垃圾内容</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>actions <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>secondActions
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="小结-2"><a href="#小结-2" class="header-anchor">#</a> 小结</h3> <ol><li>面板数据切换的思想是什么?
<ul><li>actions是反馈面板要展示的数据</li> <li>点击切换不同数据即可</li></ul></li></ol> <h2 id="_3-反馈-返回一级面板"><a href="#_3-反馈-返回一级面板" class="header-anchor">#</a> 3.反馈_返回一级面板</h2> <h3 id="目标-3"><a href="#目标-3" class="header-anchor">#</a> 目标</h3> <ul><li><p>一级和二级面板来回切换</p></li> <li><p>取消按钮的2个文字和状态</p> <p><img src="images/%E4%BA%8C%E7%BA%A7%E9%9D%A2%E6%9D%BF%E8%BF%94%E5%9B%9E.gif" alt="二级面板返回"></p></li></ul> <h3 id="思路"><a href="#思路" class="header-anchor">#</a> 思路</h3> <ol><li>点击&lt;反馈垃圾内容&gt;切换actions数据为secondActions</li> <li>下面文字显示返回</li> <li>点击返回(不能关闭), 而是切换actions数据为firstActions</li> <li>下面文字显示取消</li></ol> <h3 id="步骤-2"><a href="#步骤-2" class="header-anchor">#</a> 步骤</h3> <ol><li><p>定义变量cancelText设置底部文字(注意只是显示的文字而已)</p></li> <li><p>绑定取消事件(无论显示取消/返回文字)底部按钮点击都触发</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-sheet</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:actions</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>actions<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onSelect<span class="token punctuation">&quot;</span></span> <span class="token attr-name">get-container</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>body<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:cancel-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cancelText<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>


<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">actions</span><span class="token operator">:</span> firstActions<span class="token punctuation">,</span>
      <span class="token literal-property property">cancelText</span><span class="token operator">:</span> <span class="token string">'取消'</span> <span class="token comment">// 底部按钮文字</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 反馈面板点击事件</span>
    <span class="token function">onSelect</span> <span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'反馈垃圾内容'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>actions <span class="token operator">=</span> secondActions
        <span class="token keyword">this</span><span class="token punctuation">.</span>cancelText <span class="token operator">=</span> <span class="token string">'返回'</span> <span class="token comment">// 修改底部按钮显示文字</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>监测取消事件, 阻止弹窗关闭</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-action-sheet</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:actions</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>actions<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onSelect<span class="token punctuation">&quot;</span></span> <span class="token attr-name">get-container</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>body<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:cancel-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cancelText<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@cancel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onCancel<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 取消事件</span>
    <span class="token function">onCancel</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cancelText <span class="token operator">===</span> <span class="token string">'返回'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>actions <span class="token operator">=</span> firstActions
        <span class="token keyword">this</span><span class="token punctuation">.</span>cancelText <span class="token operator">=</span> <span class="token string">'取消'</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 点返回不要让弹窗关闭, 点取消文字按钮, 弹窗默认关闭</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <h2 id="_4-反馈-不感兴趣"><a href="#_4-反馈-不感兴趣" class="header-anchor">#</a> 4.反馈_不感兴趣</h2> <h3 id="目标-4"><a href="#目标-4" class="header-anchor">#</a> 目标</h3> <ul><li><p>调用接口</p> <p><img src="images/%E4%B8%8D%E6%84%9F%E5%85%B4%E8%B6%A3.gif" alt="不感兴趣"></p></li></ul> <h3 id="步骤-3"><a href="#步骤-3" class="header-anchor">#</a> 步骤</h3> <ol><li><p>查看接口文档 - 定义反馈不喜欢文章api/index.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 文章 - 不感兴趣</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">articleDislikeAPI</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> target <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/article/dislikes'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">target</span><span class="token operator">:</span> target
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">Authorization</span><span class="token operator">:</span> <span class="token string">'Bearer '</span> <span class="token operator">+</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>token
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>在ArticleItem.vue中, 点击不感兴趣文章, 传递文章id给ArticleList页面</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 反馈面板点击事件</span>
<span class="token function">onSelect</span> <span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'反馈垃圾内容'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>actions <span class="token operator">=</span> secondActions
        <span class="token keyword">this</span><span class="token punctuation">.</span>cancelText <span class="token operator">=</span> <span class="token string">'返回'</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'不感兴趣'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'dislike'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// 关闭弹窗</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>在ArticleList.vue中, 绑定dislike事件和dislikeFn方法</p></li> <li><p>弄个Notify通知框, 提示用户反馈结果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> articleDislikeAPI <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Notify <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vant'</span>

<span class="token comment">// 反馈(不感兴趣)</span>
<span class="token keyword">async</span> <span class="token function">dislikeFn</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token function">articleDislikeAPI</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">target</span><span class="token operator">:</span> obj<span class="token punctuation">.</span>art_id
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'反馈成功'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'warning'</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'反馈失败-联系程序员'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="小结-3"><a href="#小结-3" class="header-anchor">#</a> 小结</h3> <ol><li><p>为何这次await左边不接受结果</p> <ul><li>只要没报错, 就代表反馈成功, 而且要响应数据也无用</li></ul></li></ol> <h2 id="_5-反馈-举报文章"><a href="#_5-反馈-举报文章" class="header-anchor">#</a> 5.反馈_举报文章</h2> <h3 id="目标-5"><a href="#目标-5" class="header-anchor">#</a> 目标</h3> <ul><li><p>在上个例子基础上</p></li> <li><p>点击举报类型调用接口</p> <p><img src="images/%E4%B8%BE%E6%8A%A5%E6%96%87%E7%AB%A0.gif" alt="举报文章"></p></li></ul> <h3 id="步骤-4"><a href="#步骤-4" class="header-anchor">#</a> 步骤</h3> <ol><li><p>api/index.js - 定义接口方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 文章 - 举报</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">articleReportsAPI</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> target<span class="token punctuation">,</span> type<span class="token punctuation">,</span> remark <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/article/reports'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">target</span><span class="token operator">:</span> target<span class="token punctuation">,</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> type<span class="token punctuation">,</span>
            <span class="token literal-property property">remark</span><span class="token operator">:</span> remark
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">Authorization</span><span class="token operator">:</span> <span class="token string">'Bearer '</span> <span class="token operator">+</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>token
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>ArticleItem.vue触发父级@reports事件, 传反馈的文章对象出来和反馈类型</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 反馈面板点击事件</span>
<span class="token function">onSelect</span> <span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'反馈垃圾内容'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>actions <span class="token operator">=</span> secondActions
        <span class="token keyword">this</span><span class="token punctuation">.</span>cancelText <span class="token operator">=</span> <span class="token string">'返回'</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'不感兴趣'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'dislike'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 这里就是二级反馈</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'reports'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">,</span> action<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 外面需要反馈类型的值</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>actions <span class="token operator">=</span> firstActions
        <span class="token keyword">this</span><span class="token punctuation">.</span>show <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></li> <li><p>在ArticleList.vue里引入接口, 和@reports事件方法使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> articleReportsAPI <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api'</span>

<span class="token comment">// 反馈(举报)</span>
<span class="token keyword">async</span> <span class="token function">reportsFn</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token function">articleReportsAPI</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">target</span><span class="token operator">:</span> obj<span class="token punctuation">.</span>art_id<span class="token punctuation">,</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> type<span class="token punctuation">,</span>
            <span class="token literal-property property">remark</span><span class="token operator">:</span> <span class="token string">'就是其他问题'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'举报成功'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'warning'</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'举报失败'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="小结-4"><a href="#小结-4" class="header-anchor">#</a> 小结</h3> <ol><li><p>为什么要传action.value出去?</p> <p>因为接口要使用, 我就要想尽一切办法给他</p></li></ol> <h2 id="_6-axios-响应拦截器"><a href="#_6-axios-响应拦截器" class="header-anchor">#</a> 6.axios_响应拦截器</h2> <h3 id="目标-6"><a href="#目标-6" class="header-anchor">#</a> 目标</h3> <ul><li><p>什么是响应</p></li> <li><p>什么是axios的响应拦截器</p> <p><img src="images/image-20210702112346350.png" alt="image-20210702112346350"></p></li></ul> <h3 id="场景"><a href="#场景" class="header-anchor">#</a> 场景</h3> <ul><li><p>在响应回来后, 马上执行响应拦截器函数</p></li> <li><p>例如: 判断是否错误401, 统一进行权限判断</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 添加响应拦截器</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 当状态码为2xx/3xx开头的进这里</span>
    <span class="token comment">// 对响应数据做点什么</span>
    <span class="token keyword">return</span> response
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 响应状态码4xx/5xx进这里</span>
    <span class="token comment">// 对响应错误做点什么</span>
    <span class="token comment">// console.dir(error)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 身份过期</span>
        <span class="token comment">// token续签方式1:  去登录页重新登录, token无用, 清掉-确保路由守卫if进不去</span>
        store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'setToken'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
        router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/login'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> 
    
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="小结-5"><a href="#小结-5" class="header-anchor">#</a> 小结</h3> <ol><li>响应拦截器什么时候执行?
<ul><li>在响应回来以后</li></ul></li> <li>什么时候进响应拦截器成功, 什么时候进失败?
<ul><li>2xx/3xx开头的响应状态码进入成功</li> <li>4xx/5xx开头的响应状态码进入失败</li></ul></li></ol> <h2 id="_7-axios-请求拦截器"><a href="#_7-axios-请求拦截器" class="header-anchor">#</a> 7.axios_请求拦截器</h2> <h3 id="目标-7"><a href="#目标-7" class="header-anchor">#</a> 目标</h3> <ul><li>什么是请求</li> <li>什么是axios的请求拦截器</li></ul> <h3 id="场景-2"><a href="#场景-2" class="header-anchor">#</a> 场景</h3> <ul><li><p>在发起请求之前, 最后对要发送的请求配置对象进行修改</p></li> <li><p>例如: 如果本地有token, 携带在请求头给后台</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 添加请求拦截器</span>
axios<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在发送请求之前做些什么, 如果vuex里有token携带在请求头中</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>token<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>Authorization <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 发起请求之前, 把token携带在请求头上(表明自己身份)</span>
    config<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> <span class="token string">'Bearer '</span> <span class="token operator">+</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>token
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> config
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 对请求错误做些什么</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p>所有api接口里以后暂时不用自己携带Headers+Token了</p></li></ul> <h3 id="小结-6"><a href="#小结-6" class="header-anchor">#</a> 小结</h3> <ol><li>请求拦截器时候时候执行?
<ul><li>在发起请求最后一刻执行</li></ul></li></ol> <h2 id="_8-频道管理-号准备-上午结束"><a href="#_8-频道管理-号准备-上午结束" class="header-anchor">#</a> 8.频道管理_+号准备(上午结束)</h2> <h3 id="目标-8"><a href="#目标-8" class="header-anchor">#</a> 目标</h3> <ul><li><p>+标签准备和样式</p> <p><img src="images/image-20210331204414906.png" alt="image-20210331204414906"></p></li></ul> <h3 id="步骤-5"><a href="#步骤-5" class="header-anchor">#</a> 步骤</h3> <ol><li><p>标签准备</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- Tab 标签页 --&gt;</span>
<span class="token comment">&lt;!-- ...省略其他代码 --&gt;</span>

<span class="token comment">&lt;!-- 编辑频道图标 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>plus<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.37333334rem<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>moreChannels<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p>样式美化</p> <div class="language-less extra-class"><pre class="language-less"><code><span class="token comment">// 设置 tabs 容器的样式</span>
<span class="token selector">/deep/ .van-tabs__wrap</span> <span class="token punctuation">{</span>
  <span class="token property">padding-right</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 设置小图标的样式</span>
<span class="token selector">.moreChannels</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 62px<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 999<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="小结-7"><a href="#小结-7" class="header-anchor">#</a> 小结</h3> <ol><li>准备图标icon组件</li> <li>调整样式</li></ol> <h2 id="_9-频道管理-弹出层标签"><a href="#_9-频道管理-弹出层标签" class="header-anchor">#</a> 9.频道管理_弹出层标签</h2> <h3 id="目标-9"><a href="#目标-9" class="header-anchor">#</a> 目标</h3> <ul><li><p>频道页面弹出层标签</p> <p><img src="images/%E5%BC%B9%E5%87%BA%E5%B1%82.gif" alt="弹出层"></p></li></ul> <h3 id="步骤-6"><a href="#步骤-6" class="header-anchor">#</a> 步骤</h3> <ol><li><p>寻找类似的组件 - vant组件库叫popup组件</p></li> <li><p>main.js中注册popup组件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Popup <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vant'</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Popup<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>单独创建Home/ChannelEdit.vue - 频道编辑组件</p> <blockquote><p>需要用到的组件, 不要忘了全局注册</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 弹出层的头部区域 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>频道管理<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cross<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.37333334rem<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>white<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-nav-bar</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 我的频道 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-channel-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channel-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>我的频道
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>small-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            点击进入频道
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>编辑<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 我的频道列表 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-row</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channel-item van-hairline--surround<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            名字
            <span class="token comment">&lt;!-- 删除的徽标 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-badge</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transparent<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cross-badge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#content</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span>
                  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cross<span class="token punctuation">&quot;</span></span>
                  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>badge-icon<span class="token punctuation">&quot;</span></span>
                  <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#cfcfcf<span class="token punctuation">&quot;</span></span>
                  <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.32rem<span class="token punctuation">&quot;</span></span>
                <span class="token punctuation">/&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-badge</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-row</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 更多频道 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>more-channel-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channel-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>点击添加更多频道：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 更多频道列表 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-row</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channel-item van-hairline--surround<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>名字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-row</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.van-popup,
.popup-container</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.popup-container</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.pop-header</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 90px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #007bff<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token selector">.title</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">.pop-body</span> <span class="token punctuation">{</span>
  <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> scroll<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.my-channel-box,
.more-channel-box</span> <span class="token punctuation">{</span>
  <span class="token selector">.channel-title</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 28px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 6px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">.channel-item</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fafafa<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*删除的微标 */</span>
<span class="token selector">.cross-badge</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> -3px<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*提示文字 */</span>
<span class="token selector">.small-title</span> <span class="token punctuation">{</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> gray<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div></li> <li><p>在Home/index.vue 引入注册使用</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 头部标签 --&gt;</span>
    <span class="token comment">&lt;!-- 频道部分 --&gt;</span>
    <span class="token comment">&lt;!-- 编辑频道图标 --&gt;</span>

    <span class="token comment">&lt;!-- 弹出层组件 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-popup</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>edit_wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 弹出层的主体区域 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>channel-edit</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>channel-edit</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-popup</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> ChannelEdit <span class="token keyword">from</span> <span class="token string">'./ChannelEdit.vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 编辑频道弹出层显示</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ChannelEdit
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>准备变量show, 点击按钮处弹窗</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>plus<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.37333334rem<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>moreChannels<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show = true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p>美化样式: 让弹出层占满屏幕</p> <blockquote><p>==不要选择, van_popup类名, 因为反馈的弹出层也会变大==</p></blockquote> <div class="language-less extra-class"><pre class="language-less"><code><span class="token comment">/* 频道编辑弹出层铺满屏幕 */</span>
<span class="token selector">.edit_wrap</span><span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>补充使用组件Row, Col, Badge, main.js中注册</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Row<span class="token punctuation">,</span> Col<span class="token punctuation">,</span> Badge <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vant'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Badge<span class="token punctuation">)</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Row<span class="token punctuation">)</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Col<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>点击弹出层x, 关闭</p> <ul><li><p>ChannelEdit内向父传事件, 影响show的值</p></li> <li><p>Home/index.vue内</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 弹出层的主体区域 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>channel-edit</span> <span class="token attr-name">@close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show = false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>channel-edit</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>ChannelEdit.vue内</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-nav-bar</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>频道管理<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cross<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.37333334rem<span class="token punctuation">&quot;</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>white<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$emit('close')<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-nav-bar</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></li></ol> <h3 id="小结-8"><a href="#小结-8" class="header-anchor">#</a> 小结</h3> <ol><li>ChannelEdit.vue页面 - 是弹出层内容组件</li> <li>van-popup组件是弹出层, 内嵌ChannelEdit组件</li></ol> <h2 id="_10-频道管理-数据准备"><a href="#_10-频道管理-数据准备" class="header-anchor">#</a> 10.频道管理_数据准备</h2> <h3 id="目标-10"><a href="#目标-10" class="header-anchor">#</a> 目标</h3> <ul><li>更多频道 = 所有频道 - 我的频道</li></ul> <h3 id="步骤-7"><a href="#步骤-7" class="header-anchor">#</a> 步骤</h3> <ol><li><p>最开始定义过获取所有频道接口方法</p></li> <li><p>也定义过用户已选频道接口方法</p></li> <li><p>获取数据, 设置到变量上</p> <blockquote><p>在ChannelEdit页面内, 首页把用户已选频道传入</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> allChannelListAPI <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">allChannelList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 所有频道</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">userChannelList</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Array<span class="token punctuation">,</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">allChannelListAPI</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>allChannelList <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>channels
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>channel-edit</span> <span class="token attr-name">:userChannelList</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channelList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show = false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>channel-edit</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>ChannelEdit内设置计算属性 - 提取未选中的频道数据</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">unChannelList</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>allChannelList<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>userChannelList<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">obj2</span> <span class="token operator">=&gt;</span> obj2<span class="token punctuation">.</span>id <span class="token operator">===</span> obj<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div></li> <li><p>在Home/ChannelEdit.vue编辑频道组件上, 对应标签位置, 循环name使用即可</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 我的频道列表 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-row</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>obj in userChannelList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>obj.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channel-item van-hairline--surround<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            {{ obj.name }}
            <span class="token comment">&lt;!-- 删除的徽标 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-badge</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transparent<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cross-badge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#content</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span>
                      <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cross<span class="token punctuation">&quot;</span></span>
                      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>badge-icon<span class="token punctuation">&quot;</span></span>
                      <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#cfcfcf<span class="token punctuation">&quot;</span></span>
                      <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.32rem<span class="token punctuation">&quot;</span></span>
                      <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-badge</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-row</span><span class="token punctuation">&gt;</span></span>


<span class="token comment">&lt;!-- 更多频道 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>more-channel-box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channel-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>点击添加更多频道：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 更多频道列表 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-row</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>obj in unChannelList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>obj.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channel-item van-hairline--surround<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ obj.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-row</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <h3 id="小结-9"><a href="#小结-9" class="header-anchor">#</a> 小结</h3> <ol><li><p>如何从全部数据中, 筛选出已选数组里没有的</p> <p>遍历全部数据中的每个, 去已选数组里查找, 找不到收集起来</p></li></ol> <h2 id="_11-频道管理-编辑状态"><a href="#_11-频道管理-编辑状态" class="header-anchor">#</a> 11.频道管理_编辑状态</h2> <h3 id="目标-11"><a href="#目标-11" class="header-anchor">#</a> 目标</h3> <ul><li><p>点击编辑按钮</p></li> <li><p>显示文字切换</p></li> <li><p>x微标切换</p> <p><img src="images/%E7%BC%96%E8%BE%91%E7%8A%B6%E6%80%81.gif" alt="编辑状态"></p></li></ul> <h3 id="步骤-8"><a href="#步骤-8" class="header-anchor">#</a> 步骤</h3> <ol><li><p>点击编辑按钮实现文字切换</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channel-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>我的频道
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>small-title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            {{ isEdit ? '点击删除频道' : '点击进入频道' }}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isEdit = !isEdit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ isEdit ? '完成' : '编辑' }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">isEdit</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 控制编辑状态</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>设置x微标显示与否</p> <blockquote><p>==推荐频道上不能出现x==</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 删除的徽标 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-badge</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transparent<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cross-badge<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isEdit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#content</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span>
          <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cross<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>badge-icon<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#cfcfcf<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.32rem<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-badge</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <h3 id="小结-10"><a href="#小结-10" class="header-anchor">#</a> 小结</h3> <ol><li><p>如何在2个状态之间来回切换?</p> <p>点击事件, 让变量取反再赋予回去</p></li></ol> <h2 id="_12-频道管理-新增频道"><a href="#_12-频道管理-新增频道" class="header-anchor">#</a> 12.频道管理_新增频道</h2> <h3 id="目标-12"><a href="#目标-12" class="header-anchor">#</a> 目标</h3> <ul><li><p>新增频道效果</p> <p><img src="images/%E6%96%B0%E5%A2%9E%E9%A2%91%E9%81%93.gif" alt="新增频道"></p></li></ul> <h3 id="步骤-9"><a href="#步骤-9" class="header-anchor">#</a> 步骤</h3> <ol><li><p>更多频道选择 - 绑定点击事件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>obj in unChannelList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>obj.id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addFn(obj)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channel-item van-hairline--surround<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{ obj.name }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 新增频道</span>
        <span class="token function">addFn</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isEdit <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>	
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'addChannel'</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>回传要添加的频道obj对象, 子传父</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">addFn</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 新增频道</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isEdit <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 编辑状态</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>在Home/index.vue, 接收后, 添加到频道数组里</p> <blockquote><p>注意: 你有计算属性, 所以引用变量改变, 未选频道自动重新计算</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 弹出层的主体区域 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>channel-edit</span> <span class="token attr-name">:userChannelList</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channelList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show = false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@addChannel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addChannelFn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>channel-edit</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 添加频道</span>
        <span class="token function">addChannelFn</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>channelList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <h3 id="小结-11"><a href="#小结-11" class="header-anchor">#</a> 小结</h3> <ol><li><p>为何要子传父?</p> <p>因为数组在父页面中, 而且不违反相当数据流规范</p></li></ol> <h2 id="_13-频道管理-更新频道"><a href="#_13-频道管理-更新频道" class="header-anchor">#</a> 13.频道管理_更新频道</h2> <h3 id="目标-13"><a href="#目标-13" class="header-anchor">#</a> 目标</h3> <ul><li>新增 / 删除后同步给后台</li></ul> <h3 id="步骤-10"><a href="#步骤-10" class="header-anchor">#</a> 步骤</h3> <ol><li><p>定义更新频道接口方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 频道 - 更新已选</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">updateChannelAPI</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> channels <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/v1_0/user/channels'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'PUT'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">channels</span><span class="token operator">:</span> channels
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>在Home/index.vue - 引入接口方法, 在新增频道方法中</p> <blockquote><p>把数据预处理成后台想要的格式, 直接把频道数组更新覆盖给后台</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> updateChannelAPI <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api'</span>

<span class="token keyword">async</span> <span class="token function">editFn</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> index<span class="token punctuation">,</span> type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 编辑频道</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">'add'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> 
    <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> obj<span class="token punctuation">.</span>id <span class="token operator">!==</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 先过滤掉id为0的推荐频道, 把剩余的数组返回</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>

    <span class="token keyword">const</span> resultList <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> newObj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>item <span class="token punctuation">}</span> <span class="token comment">// 浅拷贝(让对象和原数组脱离关系)</span>
        newObj<span class="token punctuation">.</span>seq <span class="token operator">=</span> index <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token keyword">delete</span> newObj<span class="token punctuation">.</span>name <span class="token comment">// 删除对象里name键值对</span>
        <span class="token keyword">return</span> newObj
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// map会收集每次遍历return的值形成一个新数组</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resultList<span class="token punctuation">)</span>
    <span class="token keyword">await</span> <span class="token function">updateChannelAPI</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">channels</span><span class="token operator">:</span> resultList
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></li></ol> <h3 id="小结-12"><a href="#小结-12" class="header-anchor">#</a> 小结</h3> <ol><li><p>什么是数据预处理?</p> <p>要在前端使用前, 可以把数据操作一下, 要给后端使用前, 也可以用js代码处理一下</p></li></ol> <h2 id="_14-频道管理-删除频道"><a href="#_14-频道管理-删除频道" class="header-anchor">#</a> 14.频道管理_删除频道</h2> <h3 id="目标-14"><a href="#目标-14" class="header-anchor">#</a> 目标</h3> <ul><li><p>在编辑状态下, 点击频道删除</p> <p><img src="images/%E5%88%A0%E9%99%A4%E9%A2%91%E9%81%93.gif" alt="删除频道"></p></li></ul> <h3 id="步骤-11"><a href="#步骤-11" class="header-anchor">#</a> 步骤</h3> <ol><li><p>推荐频道不允许删除, 所以单独判断一下, 不给删除频道小微标</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 删除的徽标 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-badge</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transparent<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cross-badge<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isEdit &amp;&amp; obj.name !== '推荐'<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#content</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-icon</span>
          <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cross<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>badge-icon<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#cfcfcf<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0.32rem<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-badge</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>点击选项删除(而不是点击右上角小微标)</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 我的频道列表 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-row</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-col</span> <span class="token attr-name">span</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>6<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>obj in tabsList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>obj.id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>removeFn(obj)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-col</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-row</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>从ChannelEdit.vue传递要删除的索引到Home/index.vue删除频道</p> <blockquote><p>推荐频道不能删除</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 删除频道</span>
<span class="token function">removeFn</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isEdit <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">'推荐'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'removeChannel'</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>Home/index.vue - 监听removeChannel事件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 弹出层的主体区域 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>channel-edit</span> <span class="token attr-name">:userChannelList</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channelList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show = false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@addChannel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addChannelFn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@removeChannel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>removeChannelFn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>channel-edit</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>把更新方法提取, 分别调用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 添加频道</span>
    <span class="token keyword">async</span> <span class="token function">addChannelFn</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>channelList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 统一更新频道</span>
    <span class="token keyword">async</span> <span class="token function">updateChannel</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 先拷贝一份数组(前端页面用channelList, 后端用拷贝出的数组)</span>
      <span class="token comment">// 数组第一层, 对象里key+value是第二层</span>
      <span class="token keyword">const</span> newArr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>channelList<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> newObj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>obj <span class="token punctuation">}</span>
        <span class="token keyword">return</span> newObj
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">// 先剔除推荐</span>
      <span class="token keyword">const</span> index <span class="token operator">=</span> newArr<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">obj</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'推荐'</span><span class="token punctuation">)</span>
      newArr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token comment">// 转换字段</span>
      newArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">delete</span> obj<span class="token punctuation">.</span>name
        obj<span class="token punctuation">.</span>seq <span class="token operator">=</span> index <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">// 调用接口</span>
      <span class="token keyword">await</span> <span class="token function">updateChannelAPI</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">channels</span><span class="token operator">:</span> newArr
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 删除频道</span>
    <span class="token keyword">async</span> <span class="token function">removeChannelFn</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 找到这个频道在数组下标删除</span>
      <span class="token keyword">const</span> ind <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>channelList<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>id <span class="token operator">===</span> obj<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>channelList<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>ind<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></li></ol> <h3 id="小结-13"><a href="#小结-13" class="header-anchor">#</a> 小结</h3> <ol><li><p>如何区分判断推荐不能操作?</p> <p>x标签是否显示, 只是个显示, 但是事件还在</p> <p>js代码还是需要, 判断是否为推荐</p></li></ol> <h2 id="_15-频道管理-重置编辑状态"><a href="#_15-频道管理-重置编辑状态" class="header-anchor">#</a> 15.频道管理_重置编辑状态</h2> <h3 id="目标-15"><a href="#目标-15" class="header-anchor">#</a> 目标</h3> <ul><li>弹出层关闭重置编辑状态</li></ul> <h3 id="步骤-12"><a href="#步骤-12" class="header-anchor">#</a> 步骤</h3> <ol><li><p>监测弹出层关闭事件(查阅vant文档)</p> <blockquote><p>绑定@closed事件</p> <p>channel-edit添加ref(为了获取组件对象, 修改内部的isEdit变量</p></blockquote> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 弹出层组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-popup</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>edit_wrap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@closed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onPopupClosed<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 弹出层的主体区域 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>channel-edit</span> <span class="token attr-name">:userChannelList</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channelList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show = false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@addChannel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addChannelFn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@removeChannel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>removeChannelFn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channelEdit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>channel-edit</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-popup</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>在Home/index.vue - 访问到ChannelEdit.vue的isEdit变量设置为false</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 弹层关闭-重置编辑频道状态</span>
    <span class="token function">onPopupClosed</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>channelEdit<span class="token punctuation">.</span>isEdit <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="小结-14"><a href="#小结-14" class="header-anchor">#</a> 小结</h3> <ol><li><p>父亲如何操作子组件内的变量?</p> <p>可以通过ref和$refs来获取子组件对象, 然后操作子组件对象里的一切</p></li></ol> <h2 id="_16-频道管理-进入"><a href="#_16-频道管理-进入" class="header-anchor">#</a> 16.频道管理_进入</h2> <h3 id="目标-16"><a href="#目标-16" class="header-anchor">#</a> 目标</h3> <ul><li><p>在编辑频道页面, 点击进入频道</p> <p><img src="images/%E8%BF%9B%E5%85%A5%E9%A2%91%E9%81%93.gif" alt="进入频道"></p></li></ul> <h3 id="步骤-13"><a href="#步骤-13" class="header-anchor">#</a> 步骤</h3> <ol><li><p>在ChannelEdit.vue的我的频道, 点击事件判断</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 删除频道</span>
<span class="token function">removeFn</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isEdit <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">'推荐'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 删除频道</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'removeChannel'</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 进入逻辑</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'changeChannel'</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">)</span> <span class="token comment">// 关闭弹窗</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>在Home/index.vue - 绑定@changeChannel事件, 准备切换显示频道</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>channel-edit</span>
              <span class="token attr-name">:userChannelList</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channelList<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">@close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show = false<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">@addChannel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addChannelFn<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">@removeChannel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>removeChannelFn<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channelEdit<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">@changeChannel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>channgeChannelFn<span class="token punctuation">&quot;</span></span>
              <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>channel-edit</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token comment">// 切换频道</span>
    <span class="token function">channgeChannelFn</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>channelId <span class="token operator">=</span> obj<span class="token punctuation">.</span>id <span class="token comment">// 传过来的频道ID, 影响tabs默认v-model的选择</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <h3 id="小结-15"><a href="#小结-15" class="header-anchor">#</a> 小结</h3> <ol><li>van-tabs的v-model值改变, 自动影响van-tab对应内容列表出现
<ul><li>如果van-tab对应ArticleList第一次出现会执行created拿到频道id请求数据, 铺设文章列表</li> <li>如果van-tab对应ArticleList以后出现, 组件不会删除重建, 继续显示原来的文章列表</li></ul></li></ol></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#今日学习目标" class="sidebar-link reco-side-今日学习目标" data-v-b57cc07c>今日学习目标</a></li><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#_1-反馈-一级面板铺设" class="sidebar-link reco-side-_1-反馈-一级面板铺设" data-v-b57cc07c>1.反馈_一级面板铺设</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#目标" class="sidebar-link reco-side-目标" data-v-b57cc07c>目标</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#分析" class="sidebar-link reco-side-分析" data-v-b57cc07c>分析</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#小结" class="sidebar-link reco-side-小结" data-v-b57cc07c>小结</a></li><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#_2-反馈-二级面板铺设" class="sidebar-link reco-side-_2-反馈-二级面板铺设" data-v-b57cc07c>2.反馈_二级面板铺设</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#目标-2" class="sidebar-link reco-side-目标-2" data-v-b57cc07c>目标</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#步骤" class="sidebar-link reco-side-步骤" data-v-b57cc07c>步骤</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#小结-2" class="sidebar-link reco-side-小结-2" data-v-b57cc07c>小结</a></li><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#_3-反馈-返回一级面板" class="sidebar-link reco-side-_3-反馈-返回一级面板" data-v-b57cc07c>3.反馈_返回一级面板</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#目标-3" class="sidebar-link reco-side-目标-3" data-v-b57cc07c>目标</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#思路" class="sidebar-link reco-side-思路" data-v-b57cc07c>思路</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#步骤-2" class="sidebar-link reco-side-步骤-2" data-v-b57cc07c>步骤</a></li><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#_4-反馈-不感兴趣" class="sidebar-link reco-side-_4-反馈-不感兴趣" data-v-b57cc07c>4.反馈_不感兴趣</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#目标-4" class="sidebar-link reco-side-目标-4" data-v-b57cc07c>目标</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#步骤-3" class="sidebar-link reco-side-步骤-3" data-v-b57cc07c>步骤</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#小结-3" class="sidebar-link reco-side-小结-3" data-v-b57cc07c>小结</a></li><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#_5-反馈-举报文章" class="sidebar-link reco-side-_5-反馈-举报文章" data-v-b57cc07c>5.反馈_举报文章</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#目标-5" class="sidebar-link reco-side-目标-5" data-v-b57cc07c>目标</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#步骤-4" class="sidebar-link reco-side-步骤-4" data-v-b57cc07c>步骤</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#小结-4" class="sidebar-link reco-side-小结-4" data-v-b57cc07c>小结</a></li><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#_6-axios-响应拦截器" class="sidebar-link reco-side-_6-axios-响应拦截器" data-v-b57cc07c>6.axios_响应拦截器</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#目标-6" class="sidebar-link reco-side-目标-6" data-v-b57cc07c>目标</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#场景" class="sidebar-link reco-side-场景" data-v-b57cc07c>场景</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#小结-5" class="sidebar-link reco-side-小结-5" data-v-b57cc07c>小结</a></li><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#_7-axios-请求拦截器" class="sidebar-link reco-side-_7-axios-请求拦截器" data-v-b57cc07c>7.axios_请求拦截器</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#目标-7" class="sidebar-link reco-side-目标-7" data-v-b57cc07c>目标</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#场景-2" class="sidebar-link reco-side-场景-2" data-v-b57cc07c>场景</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#小结-6" class="sidebar-link reco-side-小结-6" data-v-b57cc07c>小结</a></li><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#_8-频道管理-号准备-上午结束" class="sidebar-link reco-side-_8-频道管理-号准备-上午结束" data-v-b57cc07c>8.频道管理_+号准备(上午结束)</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#目标-8" class="sidebar-link reco-side-目标-8" data-v-b57cc07c>目标</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#步骤-5" class="sidebar-link reco-side-步骤-5" data-v-b57cc07c>步骤</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#小结-7" class="sidebar-link reco-side-小结-7" data-v-b57cc07c>小结</a></li><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#_9-频道管理-弹出层标签" class="sidebar-link reco-side-_9-频道管理-弹出层标签" data-v-b57cc07c>9.频道管理_弹出层标签</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#目标-9" class="sidebar-link reco-side-目标-9" data-v-b57cc07c>目标</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#步骤-6" class="sidebar-link reco-side-步骤-6" data-v-b57cc07c>步骤</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#小结-8" class="sidebar-link reco-side-小结-8" data-v-b57cc07c>小结</a></li><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#_10-频道管理-数据准备" class="sidebar-link reco-side-_10-频道管理-数据准备" data-v-b57cc07c>10.频道管理_数据准备</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#目标-10" class="sidebar-link reco-side-目标-10" data-v-b57cc07c>目标</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#步骤-7" class="sidebar-link reco-side-步骤-7" data-v-b57cc07c>步骤</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#小结-9" class="sidebar-link reco-side-小结-9" data-v-b57cc07c>小结</a></li><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#_11-频道管理-编辑状态" class="sidebar-link reco-side-_11-频道管理-编辑状态" data-v-b57cc07c>11.频道管理_编辑状态</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#目标-11" class="sidebar-link reco-side-目标-11" data-v-b57cc07c>目标</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#步骤-8" class="sidebar-link reco-side-步骤-8" data-v-b57cc07c>步骤</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#小结-10" class="sidebar-link reco-side-小结-10" data-v-b57cc07c>小结</a></li><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#_12-频道管理-新增频道" class="sidebar-link reco-side-_12-频道管理-新增频道" data-v-b57cc07c>12.频道管理_新增频道</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#目标-12" class="sidebar-link reco-side-目标-12" data-v-b57cc07c>目标</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#步骤-9" class="sidebar-link reco-side-步骤-9" data-v-b57cc07c>步骤</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#小结-11" class="sidebar-link reco-side-小结-11" data-v-b57cc07c>小结</a></li><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#_13-频道管理-更新频道" class="sidebar-link reco-side-_13-频道管理-更新频道" data-v-b57cc07c>13.频道管理_更新频道</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#目标-13" class="sidebar-link reco-side-目标-13" data-v-b57cc07c>目标</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#步骤-10" class="sidebar-link reco-side-步骤-10" data-v-b57cc07c>步骤</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#小结-12" class="sidebar-link reco-side-小结-12" data-v-b57cc07c>小结</a></li><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#_14-频道管理-删除频道" class="sidebar-link reco-side-_14-频道管理-删除频道" data-v-b57cc07c>14.频道管理_删除频道</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#目标-14" class="sidebar-link reco-side-目标-14" data-v-b57cc07c>目标</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#步骤-11" class="sidebar-link reco-side-步骤-11" data-v-b57cc07c>步骤</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#小结-13" class="sidebar-link reco-side-小结-13" data-v-b57cc07c>小结</a></li><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#_15-频道管理-重置编辑状态" class="sidebar-link reco-side-_15-频道管理-重置编辑状态" data-v-b57cc07c>15.频道管理_重置编辑状态</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#目标-15" class="sidebar-link reco-side-目标-15" data-v-b57cc07c>目标</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#步骤-12" class="sidebar-link reco-side-步骤-12" data-v-b57cc07c>步骤</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#小结-14" class="sidebar-link reco-side-小结-14" data-v-b57cc07c>小结</a></li><li class="level-2" data-v-b57cc07c><a href="/hmtt/Day03.html#_16-频道管理-进入" class="sidebar-link reco-side-_16-频道管理-进入" data-v-b57cc07c>16.频道管理_进入</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#目标-16" class="sidebar-link reco-side-目标-16" data-v-b57cc07c>目标</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#步骤-13" class="sidebar-link reco-side-步骤-13" data-v-b57cc07c>步骤</a></li><li class="level-3" data-v-b57cc07c><a href="/hmtt/Day03.html#小结-15" class="sidebar-link reco-side-小结-15" data-v-b57cc07c>小结</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.e0cc1cb1.js" defer></script><script src="/assets/js/3.9eb4373a.js" defer></script><script src="/assets/js/1.592f9f83.js" defer></script><script src="/assets/js/12.b6cdf8f6.js" defer></script>
  </body>
</html>
